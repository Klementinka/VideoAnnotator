<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Annotator - Edit</title>
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="./css/editPageStyle.css">
</head>

<body>

    <div id="title"></div>

    <main>
        <h2 id="video-name" class="bigName"></h2>

        <video id="videoPlayer" width="640px" height="480px" controls>
            <source id="videoSource" type="video/mp4">
            Your browser does not support the video tag.
        </video>

        <div class="progress-container">
            <progress class="progress-bar" id="progress-bar"></progress>
        </div>

        <div class="button-container">
            <button id="create-tag-button">Create Tag</button>
            <button id="download-button">Download First 5 Seconds</button>
        </div>

        <script>
            document.getElementById('create-tag-button').addEventListener('click', function() {
                const video = document.getElementById('videoPlayer');
                const tagContainer = document.createElement('div');
                tagContainer.className = 'tag';
                const videoTag = document.createElement('video');
                videoTag.id = 'tagged-video';
                videoTag.width = 320;
                videoTag.height = 240;
                videoTag.controls = true;
                const sourceTag = document.createElement('source');
                sourceTag.src = document.getElementById('videoSource').src + '#t=0,5';
                sourceTag.type = 'video/mp4';
                videoTag.appendChild(sourceTag);
                tagContainer.appendChild(videoTag);
                document.querySelector('main').appendChild(tagContainer);
            });

            document.getElementById('download-button').addEventListener('click', function() {
                const video = document.getElementById('videoPlayer');
                const videoSource = document.getElementById('tagged-video').src;
                const a = document.createElement('a');
                a.href = videoSource + '#t=0,5';
                a.download = 'first-5-seconds.mp4';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
            });
        </script>

    </main>

    <div id="output"></div>

    <div id="footer"></div>

    <script src="./js/editPageScript.js"></script>

    <script src="./js/headerCreator.js"></script>

    <script src="./js/footerCreator.js"></script>
</body>

</html>